{{ printf "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>" | safeHTML }}
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:xhtml="http://www.w3.org/1999/xhtml">
{{- $baseURL := .Site.BaseURL -}}
{{- $currentDate := now.Format "2006-01-02T15:04:05-07:00" -}}
{{- /* Add homepage with highest priority */ -}}
  <url>
    <loc>{{ $baseURL }}</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>daily</changefreq>
    <priority>1.0</priority>
  </url>
{{- /* Add main section pages */ -}}
  <url>
    <loc>{{ $baseURL }}about/</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.8</priority>
  </url>
  <url>
    <loc>{{ $baseURL }}history/</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.7</priority>
  </url>
  <url>
    <loc>{{ $baseURL }}ai/</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.9</priority>
  </url>
  <url>
    <loc>{{ $baseURL }}games/</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.9</priority>
  </url>
  <url>
    <loc>{{ $baseURL }}designlab/</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.8</priority>
  </url>
  <url>
    <loc>{{ $baseURL }}store/</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>weekly</changefreq>
    <priority>0.8</priority>
  </url>
  <url>
    <loc>{{ $baseURL }}search/</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.5</priority>
  </url>
{{- /* Add LLM documentation files */ -}}
  <url>
    <loc>{{ $baseURL }}llms.txt</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.6</priority>
  </url>
  <url>
    <loc>{{ $baseURL }}llms-full.txt</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.6</priority>
  </url>
{{- /* Add all URLs from home.yaml */ -}}
{{- range .Site.Data.home.categories -}}
  {{- range .items -}}
    {{- $url := .url -}}
    {{- $absoluteURL := "" -}}
    {{- if hasPrefix $url "/" -}}
      {{- $absoluteURL = printf "%s%s" $baseURL (strings.TrimPrefix "/" $url) -}}
    {{- else if or (hasPrefix $url "http://") (hasPrefix $url "https://") -}}
      {{- $absoluteURL = $url -}}
    {{- else -}}
      {{- $absoluteURL = printf "%s%s" $baseURL $url -}}
    {{- end -}}
    {{- /* Only include internal URLs in sitemap */ -}}
    {{- if hasPrefix $absoluteURL $baseURL -}}
  <url>
    <loc>{{ $absoluteURL }}</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
    {{- end -}}
  {{- end -}}
{{- end -}}
{{- /* Add all URLs from ai.yaml */ -}}
{{- if .Site.Data.ai -}}
  {{- if .Site.Data.ai.data -}}
    {{- range .Site.Data.ai.data -}}
      {{- if .url -}}
        {{- $url := .url -}}
        {{- $absoluteURL := "" -}}
        {{- if hasPrefix $url "/" -}}
          {{- $absoluteURL = printf "%s%s" $baseURL (strings.TrimPrefix "/" $url) -}}
        {{- else if or (hasPrefix $url "http://") (hasPrefix $url "https://") -}}
          {{- $absoluteURL = $url -}}
        {{- else -}}
          {{- $absoluteURL = printf "%s%s" $baseURL $url -}}
        {{- end -}}
        {{- if hasPrefix $absoluteURL $baseURL -}}
  <url>
    <loc>{{ $absoluteURL }}</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
        {{- end -}}
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
{{- /* Add all URLs from games.yaml */ -}}
{{- if .Site.Data.games -}}
  {{- if .Site.Data.games.data -}}
    {{- range .Site.Data.games.data -}}
      {{- if .url -}}
        {{- $url := .url -}}
        {{- $absoluteURL := "" -}}
        {{- if hasPrefix $url "/" -}}
          {{- $absoluteURL = printf "%s%s" $baseURL (strings.TrimPrefix "/" $url) -}}
        {{- else if or (hasPrefix $url "http://") (hasPrefix $url "https://") -}}
          {{- $absoluteURL = $url -}}
        {{- else -}}
          {{- $absoluteURL = printf "%s%s" $baseURL $url -}}
        {{- end -}}
        {{- if hasPrefix $absoluteURL $baseURL -}}
  <url>
    <loc>{{ $absoluteURL }}</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
        {{- end -}}
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
{{- /* Add all URLs from designlab.yaml */ -}}
{{- if .Site.Data.designlab -}}
  {{- if .Site.Data.designlab.data -}}
    {{- range .Site.Data.designlab.data -}}
      {{- if .url -}}
        {{- $url := .url -}}
        {{- $absoluteURL := "" -}}
        {{- if hasPrefix $url "/" -}}
          {{- $absoluteURL = printf "%s%s" $baseURL (strings.TrimPrefix "/" $url) -}}
        {{- else if or (hasPrefix $url "http://") (hasPrefix $url "https://") -}}
          {{- $absoluteURL = $url -}}
        {{- else -}}
          {{- $absoluteURL = printf "%s%s" $baseURL $url -}}
        {{- end -}}
        {{- if hasPrefix $absoluteURL $baseURL -}}
  <url>
    <loc>{{ $absoluteURL }}</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
        {{- end -}}
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
{{- /* Add all URLs from store.yaml */ -}}
{{- if .Site.Data.store -}}
  {{- if .Site.Data.store.data -}}
    {{- range .Site.Data.store.data -}}
      {{- if .url -}}
        {{- $url := .url -}}
        {{- $absoluteURL := "" -}}
        {{- if hasPrefix $url "/" -}}
          {{- $absoluteURL = printf "%s%s" $baseURL (strings.TrimPrefix "/" $url) -}}
        {{- else if or (hasPrefix $url "http://") (hasPrefix $url "https://") -}}
          {{- $absoluteURL = $url -}}
        {{- else -}}
          {{- $absoluteURL = printf "%s%s" $baseURL $url -}}
        {{- end -}}
        {{- if hasPrefix $absoluteURL $baseURL -}}
  <url>
    <loc>{{ $absoluteURL }}</loc>
    <lastmod>{{ $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>
        {{- end -}}
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}
{{- /* Add content pages */ -}}
{{- range where .Site.AllPages "Kind" "page" -}}
  {{- if and (ne .Permalink "") (ne .Draft true) -}}
  <url>
    <loc>{{ .Permalink }}</loc>
    <lastmod>{{ .Lastmod.Format "2006-01-02T15:04:05-07:00" | default $currentDate }}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.6</priority>
  </url>
  {{- end -}}
{{- end -}}
</urlset>
